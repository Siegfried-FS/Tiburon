<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶à Panel Admin Universal - Gesti√≥n Completa</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f7fa; }
        
        .header { background: linear-gradient(135deg, #1976d2, #42a5f5); color: white; padding: 20px; text-align: center; }
        .header h1 { margin-bottom: 10px; }
        
        .container { max-width: 1200px; margin: 20px auto; padding: 0 20px; }
        
        .tabs { display: flex; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; border: none; background: #f8f9fa; transition: all 0.3s; }
        .tab.active { background: #1976d2; color: white; }
        .tab:hover { background: #e3f2fd; }
        .tab.active:hover { background: #1565c0; }
        
        .content { background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .section { display: none; }
        .section.active { display: block; }
        
        .item-list { margin-bottom: 30px; }
        .item { background: #f8f9fa; padding: 20px; margin-bottom: 15px; border-radius: 8px; border-left: 4px solid #1976d2; }
        .item h3 { color: #1976d2; margin-bottom: 10px; }
        .item-meta { font-size: 0.9rem; color: #666; margin-bottom: 15px; }
        
        .btn { background: #1976d2; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; transition: all 0.3s; }
        .btn:hover { background: #1565c0; transform: translateY(-1px); }
        .btn-success { background: #4caf50; }
        .btn-warning { background: #ff9800; }
        .btn-danger { background: #f44336; }
        
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; }
        .form-group textarea { min-height: 120px; resize: vertical; }
        
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal-content { background: white; padding: 30px; border-radius: 10px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; }
        
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; text-align: center; }
        .stat-number { font-size: 2rem; font-weight: bold; margin-bottom: 5px; }
        .stat-label { opacity: 0.9; }
        
        .loading { text-align: center; padding: 40px; color: #666; }
        .success { background: #d4edda; color: #155724; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .error { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü¶à Panel Admin Universal</h1>
        <p>Gesti√≥n completa del contenido - AWS User Group Playa Vicente</p>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="showSection('feed')">üì∞ Feed</button>
            <button class="tab" onclick="showSection('eventos')">üìÖ Eventos</button>
            <button class="tab" onclick="showSection('talleres')">üéì Talleres</button>
            <button class="tab" onclick="showSection('juegos')">üéÆ Juegos</button>
            <button class="tab" onclick="showSection('recursos')">üìö Recursos</button>
            <button class="tab" onclick="showSection('index')">üè† Index</button>
            <button class="tab" onclick="showSection('glosario')">üìñ Glosario</button>
        </div>

        <div class="content">
            <!-- Stats Dashboard -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-posts">-</div>
                    <div class="stat-label">Posts Totales</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-eventos">-</div>
                    <div class="stat-label">Eventos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-talleres">-</div>
                    <div class="stat-label">Talleres</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-recursos">-</div>
                    <div class="stat-label">Recursos</div>
                </div>
            </div>

            <!-- Feed Section -->
            <div id="feed" class="section active">
                <h2>üì∞ Gesti√≥n de Feed</h2>
                <button class="btn btn-success" onclick="addNew('feed')">‚ûï Nuevo Post</button>
                <div id="feed-list" class="item-list">
                    <div class="loading">Cargando posts...</div>
                </div>
            </div>

            <!-- Eventos Section -->
            <div id="eventos" class="section">
                <h2>üìÖ Gesti√≥n de Eventos</h2>
                <button class="btn btn-success" onclick="addNew('eventos')">‚ûï Nuevo Evento</button>
                <div id="eventos-list" class="item-list">
                    <div class="loading">Cargando eventos...</div>
                </div>
            </div>

            <!-- Talleres Section -->
            <div id="talleres" class="section">
                <h2>üéì Gesti√≥n de Talleres</h2>
                <button class="btn btn-success" onclick="addNew('talleres')">‚ûï Nuevo Taller</button>
                <div id="talleres-list" class="item-list">
                    <div class="loading">Cargando talleres...</div>
                </div>
            </div>

            <!-- Juegos Section -->
            <div id="juegos" class="section">
                <h2>üéÆ Gesti√≥n de Juegos</h2>
                <button class="btn btn-success" onclick="addNew('juegos')">‚ûï Nuevo Juego</button>
                <div id="juegos-list" class="item-list">
                    <div class="loading">Cargando juegos...</div>
                </div>
            </div>

            <!-- Recursos Section -->
            <div id="recursos" class="section">
                <h2>üìö Gesti√≥n de Recursos</h2>
                <button class="btn btn-success" onclick="addNew('recursos')">‚ûï Nuevo Recurso</button>
                <div id="recursos-list" class="item-list">
                    <div class="loading">Cargando recursos...</div>
                </div>
            </div>

            <!-- Index Section -->
            <div id="index" class="section">
                <h2>üè† Contenido del Index</h2>
                <div class="form-group">
                    <label>T√≠tulo Principal:</label>
                    <input type="text" id="index-title" placeholder="AWS User Group Playa Vicente">
                </div>
                <div class="form-group">
                    <label>Descripci√≥n:</label>
                    <textarea id="index-description" placeholder="Descripci√≥n de la comunidad..."></textarea>
                </div>
                <button class="btn btn-success" onclick="saveIndex()">üíæ Guardar Cambios</button>
            </div>

            <!-- Glosario Section -->
            <div id="glosario" class="section">
                <h2>üìñ Gesti√≥n de Glosario</h2>
                <button class="btn btn-success" onclick="addNew('glosario')">‚ûï Nuevo T√©rmino</button>
                <div id="glosario-list" class="item-list">
                    <div class="loading">Cargando t√©rminos...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para edici√≥n -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title">Editar Item</h3>
            <div id="modal-form"></div>
            <div style="margin-top: 20px; text-align: right;">
                <button class="btn" onclick="closeModal()">Cancelar</button>
                <button class="btn btn-success" onclick="saveItem()">üíæ Guardar</button>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 'feed';
        let currentData = {};
        let editingItem = null;

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            loadAllData();
        });

        function showSection(section) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update sections
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(section).classList.add('active');
            
            currentSection = section;
        }

        async function loadAllData() {
            const sections = ['feed', 'eventos', 'talleres', 'juegos', 'recursos', 'glosario'];
            
            for (const section of sections) {
                try {
                    const response = await fetch(`/assets/data/${section}.json`);
                    if (response.ok) {
                        const data = await response.json();
                        currentData[section] = data;
                        renderSection(section, data);
                    }
                } catch (error) {
                    console.log(`No se pudo cargar ${section}:`, error);
                    currentData[section] = getDefaultData(section);
                    renderSection(section, currentData[section]);
                }
            }
            
            updateStats();
        }

        function getDefaultData(section) {
            switch(section) {
                case 'feed':
                    return { posts: [] };
                case 'eventos':
                    return { eventos: [] };
                case 'talleres':
                    return { talleres: [] };
                case 'juegos':
                    return { juegos: [] };
                case 'recursos':
                    return { recursos: [] };
                case 'glosario':
                    return { terminos: [] };
                default:
                    return {};
            }
        }

        function renderSection(section, data) {
            const container = document.getElementById(`${section}-list`);
            if (!container) return;

            let items = [];
            switch(section) {
                case 'feed':
                    items = data.posts || [];
                    break;
                case 'eventos':
                    items = data.eventos || [];
                    break;
                case 'talleres':
                    items = data.talleres || [];
                    break;
                case 'juegos':
                    items = data.juegos || [];
                    break;
                case 'recursos':
                    items = data.recursos || [];
                    break;
                case 'glosario':
                    items = data.terminos || [];
                    break;
            }

            if (items.length === 0) {
                container.innerHTML = `<div class="loading">No hay ${section} disponibles. ¬°Crea el primero!</div>`;
                return;
            }

            container.innerHTML = items.map(item => `
                <div class="item">
                    <h3>${item.title || item.nombre || item.termino || 'Sin t√≠tulo'}</h3>
                    <div class="item-meta">
                        ${item.date || item.fecha || ''} | 
                        ${item.author || item.instructor || 'Admin'}
                    </div>
                    <p>${(item.content || item.descripcion || item.definicion || '').substring(0, 150)}...</p>
                    <button class="btn btn-warning" onclick="editItem('${section}', '${item.id}')">‚úèÔ∏è Editar</button>
                    <button class="btn btn-danger" onclick="deleteItem('${section}', '${item.id}')">üóëÔ∏è Eliminar</button>
                </div>
            `).join('');
        }

        function updateStats() {
            document.getElementById('total-posts').textContent = (currentData.feed?.posts || []).length;
            document.getElementById('total-eventos').textContent = (currentData.eventos?.eventos || []).length;
            document.getElementById('total-talleres').textContent = (currentData.talleres?.talleres || []).length;
            document.getElementById('total-recursos').textContent = (currentData.recursos?.recursos || []).length;
        }

        function addNew(section) {
            editingItem = null;
            showEditModal(section, null);
        }

        function editItem(section, id) {
            let items = [];
            switch(section) {
                case 'feed':
                    items = currentData.feed?.posts || [];
                    break;
                case 'eventos':
                    items = currentData.eventos?.eventos || [];
                    break;
                case 'talleres':
                    items = currentData.talleres?.talleres || [];
                    break;
                case 'juegos':
                    items = currentData.juegos?.juegos || [];
                    break;
                case 'recursos':
                    items = currentData.recursos?.recursos || [];
                    break;
                case 'glosario':
                    items = currentData.glosario?.terminos || [];
                    break;
            }
            
            const item = items.find(i => i.id === id);
            editingItem = { section, id, item };
            showEditModal(section, item);
        }

        function showEditModal(section, item) {
            const modal = document.getElementById('edit-modal');
            const title = document.getElementById('modal-title');
            const form = document.getElementById('modal-form');
            
            title.textContent = item ? `Editar ${section}` : `Nuevo ${section}`;
            
            // Generate form based on section
            form.innerHTML = getFormHTML(section, item);
            
            modal.style.display = 'flex';
        }

        function getFormHTML(section, item) {
            const commonFields = `
                <div class="form-group">
                    <label>T√≠tulo:</label>
                    <input type="text" id="edit-title" value="${item?.title || item?.nombre || item?.termino || ''}" required>
                </div>
                <div class="form-group">
                    <label>Contenido:</label>
                    <textarea id="edit-content" required>${item?.content || item?.descripcion || item?.definicion || ''}</textarea>
                </div>
            `;
            
            return commonFields;
        }

        function closeModal() {
            document.getElementById('edit-modal').style.display = 'none';
        }

        function saveItem() {
            if (!editingItem && !currentSection) return;
            
            const title = document.getElementById('edit-title').value;
            const content = document.getElementById('edit-content').value;
            
            if (!title || !content) {
                alert('Por favor completa todos los campos');
                return;
            }
            
            // Simulate save
            alert('‚úÖ Cambios guardados correctamente!\n\nNota: En producci√≥n esto se guardar√° en S3.');
            closeModal();
        }

        function deleteItem(section, id) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este elemento?')) {
                alert('‚úÖ Elemento eliminado correctamente!\n\nNota: En producci√≥n esto se eliminar√° de S3.');
            }
        }

        function saveIndex() {
            const title = document.getElementById('index-title').value;
            const description = document.getElementById('index-description').value;
            
            alert('‚úÖ Contenido del index guardado correctamente!\n\nNota: En producci√≥n esto se guardar√° en S3.');
        }
    </script>
</body>
</html>
