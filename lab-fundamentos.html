<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fundamentos de la Nube - TiburÃ³n</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <script>
        // Aplicar tema inmediatamente para evitar delay
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
</head>
<body>
    <div id="particles-js"></div>

    <header class="header">
        <nav class="nav">
            <div class="nav-brand">
                <h1>ğŸ¦ˆ TiburÃ³n</h1>
            </div>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="nav-menu">
                <li><a href="index.html" onclick="closeMenu()">ğŸ  Inicio</a></li>
                <li><a href="glosario.html" onclick="closeMenu()">ğŸ“š Glosario</a></li>
                <li><a href="laboratorios.html" onclick="closeMenu()">ğŸ§ª Laboratorios</a></li>
                <li><a href="servicios.html" onclick="closeMenu()">â˜ï¸ Servicios</a></li>
                <li><button class="theme-toggle" onclick="toggleTheme()" title="Cambiar tema">ğŸŒ™</button></li>
            </ul>
        </nav>
    </header>

    <main style="margin-top: 100px;">
        <div class="container">
            <div class="breadcrumb-modern">
                <a href="laboratorios.html" class="breadcrumb-btn">
                    <span class="breadcrumb-icon">ğŸ§ª</span>
                    <span class="breadcrumb-text">Laboratorios</span>
                </a>
                <span class="breadcrumb-separator">â€º</span>
                <div class="breadcrumb-current">
                    <span class="breadcrumb-icon">ğŸŒ¥ï¸</span>
                    <span class="breadcrumb-text">Fundamentos de la Nube</span>
                </div>
            </div>
            
            <h1>ğŸŒ¥ï¸ Fundamentos de la Nube</h1>
            <p>Selecciona una opciÃ³n para ver el contenido:</p>
            
            <div class="flip-cards-grid">
                <!-- Tarjeta 1: AWS Fundamentals -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card1">
                        <div class="flip-card-front">
                            <h3>ğŸ“š AWS Fundamentals Guide</h3>
                            <div class="pdf-preview" id="preview1">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card1', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card1', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card1', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/AWS-Fundamentals-Guide.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 2: Cloud Computing -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card2">
                        <div class="flip-card-front">
                            <h3>â˜ï¸ Cloud Computing Basics</h3>
                            <div class="pdf-preview" id="preview2">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card2', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card2', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card2', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/Cloud-Computing-Basics.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 3: EC2 -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card3">
                        <div class="flip-card-front">
                            <h3>ğŸ–¥ï¸ EC2 Instance Types</h3>
                            <div class="pdf-preview" id="preview3">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card3', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card3', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card3', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/EC2-Instance-Types.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 4: S3 -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card4">
                        <div class="flip-card-front">
                            <h3>ğŸ—„ï¸ S3 Storage Guide</h3>
                            <div class="pdf-preview" id="preview4">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card4', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card4', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card4', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/S3-Storage-Guide.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 5: VPC -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card5">
                        <div class="flip-card-front">
                            <h3>ğŸŒ VPC Networking</h3>
                            <div class="pdf-preview" id="preview5">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card5', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card5', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card5', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/VPC-Networking.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 6: IAM -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card6">
                        <div class="flip-card-front">
                            <h3>ğŸ”’ IAM Security</h3>
                            <div class="pdf-preview" id="preview6">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card6', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card6', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card6', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/IAM-Security-Best-Practices.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 7: Lambda -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card7">
                        <div class="flip-card-front">
                            <h3>âš¡ Lambda Serverless</h3>
                            <div class="pdf-preview" id="preview7">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card7', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card7', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card7', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/Lambda-Serverless.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 8: RDS -->
                <div class="flip-card">
                    <div class="flip-card-inner" id="card8">
                        <div class="flip-card-front">
                            <h3>ğŸ—ƒï¸ RDS Database</h3>
                            <div class="pdf-preview" id="preview8">
                                <div class="pdf-placeholder">
                                    <div class="placeholder-icon">ğŸ“„</div>
                                    <p>Scroll para cargar</p>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button onclick="showCardContent('card8', 'pdf')" class="btn-active">ğŸ“„ PDF</button>
                                <button onclick="showCardContent('card8', 'architecture')">ğŸ—ï¸ Arquitectura</button>
                                <button onclick="showCardContent('card8', 'description')">ğŸ“ DescripciÃ³n</button>
                                <button onclick="window.open('./restart-labs/fundamentos-nube/RDS-Database-Management.pdf', '_blank')" class="btn-full">ğŸ” Ver Completo</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
        // Configurar PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        let pdfLoaded = {
            pdf1: false,
            pdf2: false
        };

        async function loadPDFPreview(pdfId, pdfPath) {
            if (pdfLoaded[pdfId]) return;
            
            const previewId = `preview${pdfId.slice(-1)}`;
            const preview = document.getElementById(previewId);
            
            preview.innerHTML = `<div class="pdf-loading"><div class="loading-spinner"></div></div>`;
            
            try {
                preview.innerHTML = `<iframe src="${pdfPath}#toolbar=0&navpanes=0&scrollbar=0" class="pdf-simple"></iframe>`;
                pdfLoaded[pdfId] = true;
            } catch (error) {
                preview.innerHTML = `<div class="pdf-error">Error cargando PDF</div>`;
            }
        }

        // Observer para carga automÃ¡tica
        const pdfPaths = [
            './restart-labs/fundamentos-nube/AWS-Fundamentals-Guide.pdf',
            './restart-labs/fundamentos-nube/Cloud-Computing-Basics.pdf',
            './restart-labs/fundamentos-nube/EC2-Instance-Types.pdf',
            './restart-labs/fundamentos-nube/S3-Storage-Guide.pdf',
            './restart-labs/fundamentos-nube/VPC-Networking.pdf',
            './restart-labs/fundamentos-nube/IAM-Security-Best-Practices.pdf',
            './restart-labs/fundamentos-nube/Lambda-Serverless.pdf',
            './restart-labs/fundamentos-nube/RDS-Database-Management.pdf'
        ];

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const cardId = entry.target.id;
                    const cardNumber = parseInt(cardId.replace('card', ''));
                    const pdfId = `pdf${cardNumber}`;
                    
                    if (!pdfLoaded[pdfId] && pdfPaths[cardNumber - 1]) {
                        loadPDFPreview(pdfId, pdfPaths[cardNumber - 1]);
                    }
                }
            });
        }, { threshold: 0.3 });

        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar pdfLoaded para todas las tarjetas
            for (let i = 1; i <= 8; i++) {
                pdfLoaded[`pdf${i}`] = false;
                const card = document.getElementById(`card${i}`);
                if (card) {
                    observer.observe(card);
                }
            }
        });

        // FunciÃ³n para mostrar contenido de tarjetas
        function showCardContent(cardId, contentType) {
            const cardNumber = cardId.replace('card', '');
            const preview = document.getElementById(`preview${cardNumber}`);
            
            // Actualizar botones activos
            const card = document.getElementById(cardId);
            const buttons = card.querySelectorAll('.card-controls button');
            buttons.forEach(btn => btn.classList.remove('btn-active'));
            event.target.classList.add('btn-active');
            
            if (contentType === 'pdf') {
                const pdfId = `pdf${cardNumber}`;
                // Forzar recarga del PDF
                pdfLoaded[pdfId] = false;
                if (pdfPaths[cardNumber - 1]) {
                    loadPDFPreview(pdfId, pdfPaths[cardNumber - 1]);
                }
            } else if (contentType === 'architecture') {
                preview.innerHTML = `
                    <div class="architecture-content">
                        <img src="restart-labs/fundamentos-nube/810009.jpg" alt="Diagrama de Arquitectura" class="architecture-img" onclick="openImageModal(this.src)">
                        <div class="image-hint">Clic para ampliar</div>
                    </div>
                `;
            } else if (contentType === 'description') {
                preview.innerHTML = `
                    <div class="description-content">
                        <div class="desc-header">
                            <h3>ğŸ“š Laboratorio AWS</h3>
                        </div>
                        <div class="desc-body">
                            <div class="desc-section">
                                <h4>ğŸ¯ Objetivos</h4>
                                <p>Aprender conceptos fundamentales de AWS y cloud computing</p>
                            </div>
                            <div class="desc-section">
                                <h4>ğŸ“‹ Contenido</h4>
                                <div class="desc-tags">
                                    <span class="tag">â˜ï¸ Cloud Basics</span>
                                    <span class="tag">ğŸ”§ AWS Services</span>
                                    <span class="tag">ğŸ”’ Security</span>
                                    <span class="tag">ğŸ’¡ Best Practices</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Modal para imagen
        function openImageModal(imageSrc) {
            const modal = document.createElement('div');
            modal.className = 'image-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <img src="${imageSrc}" alt="Diagrama ampliado">
                    <div class="modal-hint">Presiona ESC para regresar</div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Cerrar con ESC
            const closeModal = (e) => {
                if (e.key === 'Escape' || e.target === modal) {
                    modal.remove();
                    document.removeEventListener('keydown', closeModal);
                }
            };
            
            document.addEventListener('keydown', closeModal);
            modal.addEventListener('click', closeModal);
        }
    </script>
    <style>
        .pdf-simple {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
        }
        
        /* Arreglar PDFs en mÃ³vil */
        @media (max-width: 768px) {
            .pdf-preview {
                height: 300px;
                min-height: 300px;
            }
            
            .pdf-simple {
                width: 100%;
                height: 300px;
                min-height: 300px;
            }
        }
        
        .pdf-mobile {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 20px;
            text-align: center;
        }
        
        .pdf-mobile-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .pdf-mobile p {
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        
        .pdf-mobile-btn {
            background: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
        }
        
        .pdf-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
        
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--bg-card);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .pdf-error {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            color: var(--text-muted);
            font-size: 0.9em;
        }
        
        .architecture-content {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        .architecture-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .architecture-img:hover {
            transform: scale(1.02);
        }
        
        .image-hint {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
        }
        
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
        }
        
        .modal-content img {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }
        
        .modal-hint {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .description-content {
            height: 100%;
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .desc-header {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: center;
        }
        
        .desc-header h3 {
            margin: 0;
            font-size: 1.1em;
        }
        
        .desc-body {
            padding: 20px;
        }
        
        .desc-section {
            margin-bottom: 20px;
        }
        
        .desc-section h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        
        .desc-section p {
            color: var(--text-primary);
            font-size: 0.85em;
            line-height: 1.4;
            margin-bottom: 15px;
        }
        
        /* Mejorar legibilidad en tema claro */
        [data-theme="light"] .flip-card-front {
            background: rgba(37, 99, 235, 0.1);
            border: 2px solid var(--primary-color);
        }
        
        [data-theme="light"] .flip-card-front h3 {
            color: var(--primary-color);
        }
        
        [data-theme="light"] .card-controls button {
            background: var(--primary-color);
            color: white;
            border: 1px solid var(--primary-color);
        }
        
        [data-theme="light"] .card-controls .btn-active {
            background: var(--secondary-color);
        }
        
        [data-theme="light"] .pdf-placeholder p {
            color: var(--text-secondary);
        }
        
        .desc-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 500;
        }
        
        /* Arreglar colores especÃ­ficos para tema claro */
        [data-theme="light"] .breadcrumb-btn {
            background: rgba(37, 99, 235, 0.1) !important;
            color: var(--primary-color) !important;
            border: 1px solid var(--primary-color) !important;
            border-radius: 12px !important;
            padding: 8px 16px !important;
            font-weight: 600 !important;
        }
        
        [data-theme="light"] .breadcrumb-current {
            color: var(--text-primary) !important;
            background: rgba(37, 99, 235, 0.05) !important;
            padding: 8px 16px !important;
            border-radius: 12px !important;
            border: 1px solid rgba(37, 99, 235, 0.2) !important;
        }
        
        [data-theme="light"] .breadcrumb-separator {
            color: var(--text-secondary) !important;
        }
        
        [data-theme="light"] .btn-full {
            background: var(--primary-color) !important;
            color: white !important;
            border: 1px solid var(--primary-color) !important;
        }
        
        /* Aplicar mismo estilo exitoso a botones de PDFs */
        [data-theme="light"] .card-controls button {
            color: var(--primary-color) !important;
            background: rgba(37, 99, 235, 0.1) !important;
            padding: 6px 12px !important;
            border-radius: 12px !important;
            font-weight: 600 !important;
            border: 1px solid var(--primary-color) !important;
        }
        
        [data-theme="light"] .card-controls .btn-active {
            background: var(--primary-color) !important;
            color: white !important;
        }
        
        [data-theme="light"] .card-controls .btn-full {
            background: rgba(37, 99, 235, 0.1) !important;
            color: var(--primary-color) !important;
            border: 1px solid var(--primary-color) !important;
        }
        
        /* Ampliar y reorganizar tarjetas correctamente */
        .flip-card {
            height: 580px !important;
        }
        
        .flip-card-front {
            padding: 25px !important;
        }
        
        .pdf-preview {
            height: 380px !important;
            min-height: 380px !important;
            margin: 20px 0 !important;
        }
        
        .card-controls {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            grid-template-rows: 1fr 1fr !important;
            gap: 10px !important;
            margin-top: auto !important;
            padding: 15px 0 !important;
        }
        
        .card-controls button {
            padding: 8px 16px !important;
            margin: 0 !important;
            min-width: 100px !important;
        }
        
        /* Orden especÃ­fico de botones */
        .card-controls button:nth-child(1) { grid-area: 1 / 1; } /* PDF - arriba izquierda */
        .card-controls button:nth-child(3) { grid-area: 1 / 2; } /* DescripciÃ³n - arriba derecha */
        .card-controls button:nth-child(2) { grid-area: 2 / 1; } /* Arquitectura - abajo izquierda */
        .card-controls button:nth-child(4) { grid-area: 2 / 2; } /* Ver Completo - abajo derecha */
        
        /* MÃ³vil sin problemas */
        @media (max-width: 768px) {
            .flip-cards-grid {
                grid-template-columns: 1fr !important;
                gap: 30px !important;
            }
            
            .pdf-simple {
                width: 100% !important;
                height: 100% !important;
            }
            
            .pdf-preview {
                overflow: hidden !important;
            }
        }
    </style>
</body>
</html>
